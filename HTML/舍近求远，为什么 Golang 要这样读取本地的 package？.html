 
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
    <p class="site-subtitle">给时光以生命。</p> <p>我们知道，Python 的第三方库一般是托管到 Pypi 上面的，使用 <code>pip</code> 命令进行安装。而 Golang 很多第三方库是托管在 Github 上面的，使用 <code>go get</code> 进行安装。</p> <p>有时候，我们会发现一个很奇怪的现象，很多 Golang 的项目，在引用自己项目里面的包的时候，竟然用的是 Github 上面的地址。</p> <p>例如我们看这个项目：<a href="https://github.com/kingname/handsome" rel="noopener" target="_blank">https://github.com/kingname/handsome</a> ，它的入口文件是<code>main.go</code>。我们打开这个文件，会看到里面<code>import</code>语句中，从 Github导入自身的<code>util</code>包：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/20220120193156.png"/></p> <p>可问题是，这个 <code>util</code>文件夹就在<code>main.go</code>旁边啊：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/20220120193259.png"/></p> <p>如果是在 Python 里面，入口文件<code>main.py</code>旁边有一个<code>util</code>文件夹，这个文件夹里面有一个<code>util.py</code>的文件，那么我们直接写<code>from util.util import xxx</code>就可以导入<code>util.py</code>文件中的函数了。为什么 Golang 里面要从 Github 导入？那如果我更新了<code>util/util.go</code>文件里面的内容，但是我没有把这次修改上传到 Github 中，当我运行<code>go run main.go</code>的时候，运行的是老代码还是新代码？用的是我本地的版本还是 Github 上面的版本？</p> <p>这个问题的关键，就在<code>go.mod</code>这个文件中。打开请看这个文件的第一行：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/20220120194356.png"/></p> <p>可以看到，这个项目是使用 <code>go mod</code> 进行管理的，并且指定这个模块的名字，就叫做<code>github.com/kingname/handsome</code>。</p> <p>所以，当我们执行命令<code>go run main.go</code>的时候，Golang 的编译器知道自己就是<code>github.com/kingname/handsome</code>，那么<code>main.go</code>里面导入<code>github.com/kingname/handsome/util</code>，实际上就是本项目自身根目录的 <code>util</code>文件夹中的包，它不会发起网络请求，不会从 Github 上面重新下载。每次运行的时候，使用的总是项目<code>util/util.go</code>中的内容。</p> <p>但是，如果你现在在另外一个项目里面导入<code>github.com/kingname/handsome/util</code>，Golang 从<code>go.mod</code>中知道当前运行的项目跟即将导入的这个包不在同一个项目中，于是它就会去 Github 上面拉代码下来运行。</p> <p>这个规则，可以在 Golang 的官方文档<strong>Module paths</strong>这一节找到：<a href="https://go.dev/ref/mod#introduction" rel="noopener" target="_blank">Go Modules Reference - The Go Programming Language</a>。</p> <p class="site-author-name" itemprop="name">谢乾坤 | Kingname</p> <p class="site-description motion-element" itemprop="description">高级数据挖掘工程师，《Python 爬虫开发 从入门到实战》、《左手 MongoDB 右手 Redis——从入门到商业实战》作者。 微软最有价值专家 MVP，Python Scrapy MongoDB Redis Pandas Golang。</p>
    </body>
    </html>
    
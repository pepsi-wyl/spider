 
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
    <p class="site-subtitle">给时光以生命。</p> <p>有同学在知识星球上问我，什么情况下使用静态方法，什么情况下使用类方法。今天我们就来捋一下这两个方法的应用场景。</p> <p>首先，我们来定义一个普通的类。里面都是普通的方法。普通的方法又叫做实例方法。</p> <p>这个类运行起来的效果如下图所示：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/20211008184034.png"/></p> <p>大家注意在个类里面的方法<code>add_two_string_num</code>，它接受两个参数，把他们转换为<code>int</code>类型，然后相加并返回结果。这个过程非常简单。但是，它跟People这个类有什么直接关系吗？</p> <p>其实这个方法跟这个类没有什么直接关系，我们甚至把它改成函数都可以：</p> <p>运行结果跟之前完全一样：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/20211008184448.png"/></p> <p>我们可以说，<code>add_two_string_num</code>函数就是一个<code>工具函数</code>。工具函数接收参数，输出结果。完全不关心谁在调用他，也不关心在哪里调用他。</p> <p>但现在有一个比较尴尬的事情，这个函数，只有 <code>People</code>在调用，其它地方都没有调用。单独把它放到其它地方又显得多余，弄成实例方法又浪费了self参数，这个时候，我们就可以用静态方法：</p> <p>一句话总结：静态方法就是某个类专用的工具函数。</p> <p>说完了静态方法，我们再说说类方法。什么情况下应该使用类方法呢？回答这个问题前，我先返回你一个问题，怎么把<code>People</code>类初始化成一个实例？</p> <p>你说这还不简单吗，一行代码就行了啊：</p> <p>注意，这里你在初始化这个类的时候，你是一个一个参数传入进去的。如果你用过顺丰寄送快递，你就会发现，填写收件人的时候，有两种方式，一种方式就像上线这样，一个一个参数填进去。还有一种方式，它给你一个输入框，你把一段包含姓名，地址，手机号的文字粘贴进去，它自动解析。</p> <p>那么，如果我现在给你一个字符串：<code>我的名字：青南，我的年龄：20，把它提取出来</code>。你怎么基于这个字符串生成People类的实例？</p> <p>这个时候，你可能会这样写：</p> <p>这样做确实可以，但我能不能让People这个类自动识别呢？其实是可以的，有两种方法，一种方法是在<code>__init__</code>里面多加几个参数，然后在初始化的时候，从这几个参数里面解析，这个方法大家都知道，我就不多讲了。我们来讲讲第二个方法，就是使用类方法。</p> <p>我们只需要在定义一个类方法：</p> <p>运行效果如下图所示：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/20211008190533.png"/></p> <p>类方法使用装饰器<code>@classmethod</code>来装饰，并且它的第一个参数是隐式参数<code>cls</code>。这个参数其实就是<code>People</code>这个类本身。这个隐式参数在我们调用类方法的时候，是不需要传入的。在这个类方法里面，相当于使用<code>People</code>初始化了一个实例，然后把这个实例返回了出去。</p> <p>这样做有什么好处呢？好处就在于我们完全不需要修改<code>__init__</code>，那么，也就不需要修改代码里面其它调用了<code>People</code>类的地方。例如现在我又想增加从英文句子里面提取名字和年龄的功能，那么我只需要再添加一个类方法就可以了：</p> <p>运行效果如下图所示：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/20211008190831.png"/></p> <p>一句话总结：当你想使用工厂模式，根据不同的参数生成同一个类的不同对象的时候，就可以使用类方法。</p> <p>其实如果大家使用过Python自带的<code>datetime</code>模块，你就会发现类方法无处不在：</p> <p>这段代码里面的<code>.now()</code>、<code>.fromtimestamp()</code>和 <code>.fromisoformat()</code>，都是类方法。他们最终返回的都是<code>datetime.datetime</code>对象。但是他们是根据不同类型的输入参数生成的。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/640.gif"/></p> <p class="site-author-name" itemprop="name">谢乾坤 | Kingname</p> <p class="site-description motion-element" itemprop="description">高级数据挖掘工程师，《Python 爬虫开发 从入门到实战》、《左手 MongoDB 右手 Redis——从入门到商业实战》作者。 微软最有价值专家 MVP，Python Scrapy MongoDB Redis Pandas Golang。</p>
    </body>
    </html>
    
 
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
    <p class="site-subtitle">给时光以生命。</p> <p>有一类面试官特别讨厌，面试的时候，会问一些偏、难、怪的题目。假设你今天去面试，遇到面试官问你：“什么是鸭子类型？”。你怎么回答？</p> <p>熟读维基百科的你，脑海中闪过了下面这张截图：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2021-07-01-23-07-04.png"/></p> <p>图中的红框像闪电一样从你的脑子里划过。你用中指扶了扶黑框眼镜，自信地说道：</p> <p>鸭子类型就是说，一个函数不会关心它传入参数的类型，只关心这个参数对应的对象有没有自己想要的方法和属性。如果有，就能运行。如果没有，就不能运行。这就像是我看到了一只鸟，只要它能像鸭子一样叫，像鸭子一样走路，有鸭子一样的白色羽毛，那么，无论它实际上是什么东西，我都认为它是鸭子。</p> <p>说完这段话，一道光从你的镜片上一闪而过。你心里想，这下稳了。</p> <p>面试官又问：那你用 Golang 写一个鸭子类型的例子。</p> <p>你一想，Golang 是静态语言啊，参数都要声明类型的，怎么绕过它的类型检测呢？你又转念再一想，不对，Golang 确实可以绕过类型检测的。使用接口就可以了。</p> <p>于是你刷刷刷写下来一段 Golang 语言的代码：</p> <p>代码运行效果如下图所示：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2021-07-01-23-38-04.png"/></p> <p>然后你解释道，在函数<code>main()</code>里面，变量<code>singleDog</code>的类型是 <code>People</code> 类型，变量<code>dog</code>的类型是<code>Pet</code>类型。虽然他们是不同的类型，但是由于他们都有<code>Eat</code>方法和<code>Sleep</code>方法，所以，他们都能在<code>check</code>函数里面运行。</p> <p>面试官又问，你的代码写得没有问题，例子也举得没有问题。那我再问你，既然<code>check</code>函数不关心传入参数的类型，只关心他们的方法，是不是说明<code>check</code>函数接收的参数是鸭子类型？</p> <p>你说，是的。</p> <p>面试官又问，但是，我们从代码里面可以看到，<code>check</code>函数接收的这个参数<code>animal</code>的类型是接口类型。那是不是说明<code>接口类型</code>等于<code>鸭子类型</code>？</p> <p>你一时回答不上来。</p> <p>面试官又问：那接口类型和鸭子类型是什么关系？鸭子类型是像<code>int</code>、<code>string</code>、<code>map</code>这样内置的类型吗？我们可以在 Golang 里面使用<code>var a string</code> 声明一个类型为<code>string</code>的变量，那请问怎么声明一个类型为鸭子的变量？</p> <p>你一时想不起来 Golang 自带的关键词里面，哪个关键词包含<code>duck</code>这个单词。</p> <p>面试官露出了耐克式的微笑，对你说：“回家等通知吧。”</p> <p>这个讨厌的面试官最后一个问题把你难住了。但是这个问题其实是一个陷阱。面试官给你玩了一个文字游戏。当他把<code>鸭子类型</code>和<code>整型、字符串类型</code>合在一起说的时候，让你觉得<code>鸭子类型</code>也是一种类型。但实际上<code>鸭子类型</code>并不是一种类型，<code>鸭子类型</code>是一种动态类型的风格：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2021-07-01-23-55-07.png"/></p> <p>怎么解释什么叫做设计风格呢？我们再用 Python 举个例子：</p> <p>在鸭子类型这种设计<code>风格</code>中，开发者不关心对象是什么类型。它只关心对象有没有特定的方法。</p> <p>总结：鸭子类型是一种设计风格，不是一种具体的类型。</p> <p class="site-author-name" itemprop="name">谢乾坤 | Kingname</p> <p class="site-description motion-element" itemprop="description">高级数据挖掘工程师，《Python 爬虫开发 从入门到实战》、《左手 MongoDB 右手 Redis——从入门到商业实战》作者。 微软最有价值专家 MVP，Python Scrapy MongoDB Redis Pandas Golang。</p>
    </body>
    </html>
    
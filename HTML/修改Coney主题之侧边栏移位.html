 
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
    <p class="site-subtitle">给时光以生命。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coney_0.jpg"/></p> <p>Coney是一个非常漂亮的Hexo主题，作者的博客请戳-&gt;<a href="http://gengbiao.me/" rel="noopener" target="_blank">http://gengbiao.me/</a> 本博客的主题是基于Coney修改而成。</p> <p>我个人比较喜欢侧边栏在左边，于是我希望能将右侧的侧边栏整体移动到左边去。大家对比我的博客首页和主题作者的博客首页就可以看出不同。</p> <p>在修改之前，需要解释一下div标签。不讲定义，只举例子。大家注意这篇文章的配图。设想有这样一个场景，你要搬家，从成都搬到北京。你可以一件一件的把家里的东西搬出来，然后运到北京，再放进新的家。也可以，把你的整个房子连根撬起来，用超人或者热气球直接运送到北京去。这么做的好处是，你只需要搬房子，而房子里面的东西完全不受影响。div标签就可是实现这样的功能。</p> <p>使用Chrome的审查元素功能，可以发现这个主题首页的正文部分的布局是这样的：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneyconey_layout.png"/></p> <p>其中A，B分别是控制侧边栏开启和关闭的开关，A是openaside B是closeaside，在侧边栏开启的时候，A是隐藏的。</p> <p>当然实际的布局里还有其他div，但是当我只需要知道你有一个房子，房子里有几间房间的时候，我是没有必要去关心你卫生间里是马桶还是痰盂的。</p> <p>那么现在目标就是，把asidepart，openaside这两个东西移动到左边，把main移动到右边。我这里没有说closeaside，不是笔误，而是因为closeaside是在asidepart里面的，因此移动asidepart的时候，closeaside跟着就移动了。</p> <p>打开themes\coney\source\css_partial文件夹，发现有一个aside.styl文件，根据名字猜测，这个东西应该就是关于侧边栏的布局了。</p> <p>打开aside.styl文件，发现这其实就是一个css文件。首先看到前面几段代码：<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/><span class="line">17</span><br/><span class="line">18</span><br/><span class="line">19</span><br/><span class="line">20</span><br/><span class="line">21</span><br/><span class="line">22</span><br/><span class="line">23</span><br/><span class="line">24</span><br/><span class="line">25</span><br/><span class="line">26</span><br/><span class="line">27</span><br/><span class="line">28</span><br/><span class="line">29</span><br/><span class="line">30</span><br/><span class="line">31</span><br/><span class="line">32</span><br/><span class="line">33</span><br/><span class="line">34</span><br/><span class="line">35</span><br/><span class="line">36</span><br/><span class="line">37</span><br/><span class="line">38</span><br/><span class="line">39</span><br/><span class="line">40</span><br/><span class="line">41</span><br/><span class="line">42</span><br/><span class="line">43</span><br/><span class="line">44</span><br/></pre></td><td class="code"><pre><span class="line">//button</span><br/><span class="line">.openaside</span><br/><span class="line">  display none</span><br/><span class="line">  position fixed</span><br/><span class="line">  right 7.5%</span><br/><span class="line">  top 260px</span><br/><span class="line">  a</span><br/><span class="line">    display block</span><br/><span class="line">    color color-white</span><br/><span class="line">    border 1px solid color-white</span><br/><span class="line">    border-radius 5px</span><br/><span class="line">    background color-theme</span><br/><span class="line">    padding 0.2em 0.55em</span><br/><span class="line">    &amp;::before</span><br/><span class="line">      font-family font-icon-family</span><br/><span class="line">      font-smoothing()</span><br/><span class="line">      content "\f0c9"</span><br/><span class="line"></span><br/><span class="line">.closeaside</span><br/><span class="line">  display none</span><br/><span class="line">  a</span><br/><span class="line">    color color-theme</span><br/><span class="line">    &amp;:hover</span><br/><span class="line">      color color-blue</span><br/><span class="line">    &amp;::before</span><br/><span class="line">      font-family font-icon-family</span><br/><span class="line">      font-smoothing()</span><br/><span class="line">      content "\f0c9"</span><br/><span class="line">  @media tablet</span><br/><span class="line">    display block</span><br/><span class="line">    position absolute</span><br/><span class="line">    right 25px</span><br/><span class="line">    top 22px</span><br/><span class="line"></span><br/><span class="line">//sidebar</span><br/><span class="line">#asidepart</span><br/><span class="line">  background color-section</span><br/><span class="line">  margin 1em 0 0</span><br/><span class="line">  padding 0.5em 2% 1em</span><br/><span class="line">  @media tablet</span><br/><span class="line">    position relative</span><br/><span class="line">    float left</span><br/><span class="line">    width 18%</span><br/><span class="line">    margin 2em 0 0 3%</span><br/></pre></td></tr></table></figure></p> <p>Coney作者的命名方式非常好，于是我们很容易就看到了需要的内容。<br/>在.openaside下面，看到一个<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">right 7.5%</span><br/></pre></td></tr></table></figure></p> <p>当我们隐藏了侧边栏以后，看到的小方块，就是箭头指向的这个</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneyopenaside.jpg"/></p> <p>如果我把这个right改成left会有什么效果呢？不妨一试</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneyopenaside_change1.jpg"/></p> <p>看起来有点效果了。那么继续看下面的.closeaside<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">right 25px</span><br/></pre></td></tr></table></figure></p> <p>尝试把right修改为left对比一下前后效果：</p> <p>修改前：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneycloseaside1.jpg"/></p> <p>修改后:</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneycloseaside2.jpg"/></p> <p>这个小图标在侧边栏里面的相对位置改变了，这就像是你从家里的卧室走到了厨房。你并不关心房子外面是不是奥特曼在打小怪兽。你只是换了一个房间。</p> <p>再往下走，发现#asidepart下面有个<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">position relative</span><br/><span class="line">float left</span><br/></pre></td></tr></table></figure></p> <p>我想把侧边栏从右边移动到左边，那这里应该有个right才对，为什么它竟然是left？而且position的意思是位置，relative是相对，也就是说是相对位置？很奇怪，先不动它。</p> <p>再来找找main在哪里。在themes\coney\source\css_partial下面的index.styl里发现了它。<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/></pre></td><td class="code"><pre><span class="line">#main</span><br/><span class="line">  margin 1em 0 0</span><br/><span class="line">  line-height line-height+0.3</span><br/><span class="line">  @media tablet</span><br/><span class="line">    margin 2em 0 0</span><br/><span class="line">    width 75%</span><br/><span class="line">    position relative</span><br/><span class="line">    float left</span><br/><span class="line">    transition margin 0.5s ease-out</span><br/></pre></td></tr></table></figure></p> <p>这里发现了一个left，既然我想把main从左边移动到右边，那就尝试把这个left改成right然后测试一下效果。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneymain_right.jpg"/></p> <p>哈哈，成了！</p> <p>等等，别高兴的太早，点一下关闭侧边栏的按钮试一试。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneymain_change2.jpg"/></p> <p>是不是感觉怪怪的？对比一下作者的博客效果</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneyopenaside.jpg"/></p> <p>隐藏侧边栏以后，文章列表应该向右移动，那我把侧边栏移动到左边并隐藏以后，文章列表应该向左移动才对啊！可是它为什么死在那里了？</p> <p>经过询问作者，我得知这个文章列表的移动的相关javascript代码在after_footer.ejs文件中。<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/><span class="line">3</span><br/><span class="line">4</span><br/><span class="line">5</span><br/><span class="line">6</span><br/><span class="line">7</span><br/><span class="line">8</span><br/><span class="line">9</span><br/><span class="line">10</span><br/><span class="line">11</span><br/><span class="line">12</span><br/><span class="line">13</span><br/><span class="line">14</span><br/><span class="line">15</span><br/><span class="line">16</span><br/></pre></td><td class="code"><pre><span class="line">var m = $('#main')</span><br/><span class="line">      a = $('#asidepart')</span><br/><span class="line">      c = $('.closeaside')</span><br/><span class="line">      o = $('.openaside');</span><br/><span class="line">...........</span><br/><span class="line"></span><br/><span class="line">c.click(function(){</span><br/><span class="line">    a.addClass('fadeOut').css('display' 'none');</span><br/><span class="line">    o.css('display' 'block').addClass('fadeIn');</span><br/><span class="line">    m.addClass('moveMain');</span><br/><span class="line">  });</span><br/><span class="line">  o.click(function(){</span><br/><span class="line">    o.css('display' 'none').removeClass('beforeFadeIn');</span><br/><span class="line">    a.css('display' 'block').removeClass('fadeOut').addClass('fadeIn');      </span><br/><span class="line">    m.removeClass('moveMain');</span><br/><span class="line">  });</span><br/></pre></td></tr></table></figure></p> <p>虽然我不会javascript，但是根据这段代码，猜一下意思：</p> <p>觉得moveMain很可疑，而且move移动，Main就是文章列表的div的名字，这个解释天衣无缝啊。</p> <p>我在themes\coney\source\css_partial文件夹下面的index.styl中找到了这个moveMain<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/><span class="line">2</span><br/></pre></td><td class="code"><pre><span class="line">.moveMain</span><br/><span class="line">  margin-left 10% !important</span><br/></pre></td></tr></table></figure></p> <p>网上搜索了一下，发现margin-left的意思是：</p> <p>margin-left 属性设置元素的左外边距。</p> <p>就是距离左侧10%的距离，假设原来的距离小于10%，当我点了关闭侧边栏以后，为了让main距离左侧的距离达到10%，不就正好的是向右移动吗？</p> <p>既然这个解释天衣无缝，那就把left改成right试一试效果。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneymove.jpg"/></p> <p>这样看起来似乎已经达到效果了，但是感觉有些地方不太和谐。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneydis.jpg"/></p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneydis2.jpg"/></p> <p>侧边栏距离文章列表太近了。</p> <p>这个时候就要用到Chrome的强大功能了，启动审查元素功能，定位到侧边栏</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneydis3.jpg"/></p> <p>注意右侧<br/><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br/></pre></td><td class="code"><pre><span class="line">margin 2em 0 0 3%</span><br/></pre></td></tr></table></figure></p> <p>margin是边界的意思，那么右边四个数据应该就是控制侧边栏上下左右距离的了。尝试修改，发现吧3%改成0的时候，出现了我希望的效果</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/change_coneydis4.jpg"/></p> <p>这个数据是在aside.styl中，修改以后生成页面，完美实现了需求的功能。你在首页或者这个页面都可以看到最终效果。</p> <p>需要说明的是，虽然我写了这么长一篇，但是我实际上是没有CSS基础的，都是自己摸索，所以你也可以做出自己的主题。</p> <p>既然选择了Hexo，也就选择了折腾。</p> <p>生命不息，折腾不止。</p> <p class="site-author-name" itemprop="name">谢乾坤 | Kingname</p> <p class="site-description motion-element" itemprop="description">高级数据挖掘工程师，《Python 爬虫开发 从入门到实战》、《左手 MongoDB 右手 Redis——从入门到商业实战》作者。 微软最有价值专家 MVP，Python Scrapy MongoDB Redis Pandas Golang。</p>
    </body>
    </html>
    
 
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
    <p class="site-subtitle">给时光以生命。</p> <p><a href="https://github.com/GeneralNewsExtractor/GeneralNewsExtractor" rel="noopener" target="_blank">Gne</a>发布以后，大家自动化抓取新闻正文页的需求被解决了。但随之而来的，不断有同学希望能出一个抓取列表页的工具，于是，就有了今天的 GneList。</p> <p>GneList是一个浏览器插件，专门用来生成列表页的 XPath。使用这个 XPath，你可以快速获取到列表页中的每一个条目。</p> <p>GneList 的使用非常简单，几乎不需要说明。</p> <p>GneList 由两个部分组成：插件端与后端。</p> <p>插件端的下载地址：<a href="https://github.com/GeneralNewsExtractor/GneList/releases/download/0.1/GneList.zip" rel="noopener" target="_blank">https://github.com/GeneralNewsExtractor/GneList/releases/download/0.1/GneList.zip</a></p> <p>后端的代码：<a href="https://github.com/GeneralNewsExtractor/GneListBackend" rel="noopener" target="_blank">https://github.com/GeneralNewsExtractor/GneListBackend</a> ，并且后端依赖 MongoDB。</p> <p>首先确保你有一个可以连接的 MongoDB，我们假设它的 URI 是：<code>mongodb://localhost</code>。从 Github上面 clone 后端的代码：<code>https://github.com/GeneralNewsExtractor/GneListBackend.git</code>。</p> <p>进入后端代码的根目录中的 config 文件夹中，你会发现一个<code>local.yml</code>文件。打开它，第一行填写 MongoDB 的 URI 地址，第二行是数据库名，第三行是集合名。插件生成的 XPath 会保存在这里供你的下游调用。</p> <p>改好配置文件以后，回到后端的根目录，分别执行如下命令(你需要先安装 Pipenv)：</p> <p>命令执行完成后，如果你使用浏览器访问<code>http://127.0.0.1:8800</code>，应该会看到下图的内容，说明后端搭建成功。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2022-03-08-22-40-38.png"/></p> <p>GneList 插件支持所有基于 Chromium 内核的浏览器，包括但不限于 Chrome/Chromium/Edge。</p> <p>从上面的地址下载<code>GneList.zip</code>后，把它解压到任何一个文件夹中，如下图所示：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2022-03-08-22-45-08.png"/></p> <p>然后打开你的浏览器的插件管理页面，启动<code>开发人员模式</code>，例如下图是我在 Edge 中开启开发人员模式的方法。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2022-03-08-22-47-02.png"/></p> <p>然后点击右上角的<code>加载解压缩的扩展</code>，选中<code>GneList</code>文件夹。完成。</p> <p>现在，刷新已有的列表页，或者重新开一个新的列表页，然后点击插件，试用一下吧。</p> <p>在插件上右键，选择<code>扩展选项</code>。Chrome 上面，名字可能是叫做<code>选项</code>或者英文<code>Options</code>。可以打开如下图所示的页面：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2022-03-08-22-51-06.png"/></p> <p>如果你没有启动后端，或者后端地址不是<code>http://127.0.0.1:8800</code>（例如你把后端部署在服务器上，需要使用 IP 或者域名来访问，或者端口不是8800），那么这个页面应该如上图所示。</p> <p>你可以把输入框中的地址改为<code>后端地址/rule</code>，例如<code>http://123.56.78.99:8888/rule</code>。然后点击<code>提交</code>按钮。接下来刷新页面，你就可以看到如下图所示的内容：</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2022-03-08-22-54-35.png"/></p> <p>这个页面显示了你已经添加的所有网站的XPath，你可以对他们进行修改或者删除。</p> <p>为什么插件生成的 XPath 这么奇怪？</p> <p>因为这些 XPath 是从 CssSelector 转成的 XPath，我用了一个第三方的 JavaScript 包。那个包转出来的就是这么奇怪。但不影响它的功能。我后面会更换更好的包，让 XPath 变得更好看。</p> <p>我的爬虫怎么使用这些 XPath？</p> <p>还记得一开始配置的 MongoDB 吗？让你的爬虫去里面读取就可以了。</p> <p>为什么我启动插件以后，点网页上面的元素第一次没有反应？</p> <p>第一次点击的时候，如果发现没有生成红框框，就多点一下。看到红框框了再点第二个元素。</p> <p>接下来的几篇文章，我会介绍 GneList 的原理。如果你等不及的话，也可以到 Github上查看<a href="https://github.com/GeneralNewsExtractor/GneList" rel="noopener" target="_blank">源代码</a>。GneList 与 Gne 一样，他们是站在其他优秀开源项目的肩膀上做出来的，尤其是受到 <a href="https://github.com/martinsbalodis/web-scraper-chrome-extension" rel="noopener" target="_blank">web-scraper-chrome-extension</a>的启发。因此，GneList也是完全开源的，允许非商业使用。</p> <p class="site-author-name" itemprop="name">谢乾坤 | Kingname</p> <p class="site-description motion-element" itemprop="description">高级数据挖掘工程师，《Python 爬虫开发 从入门到实战》、《左手 MongoDB 右手 Redis——从入门到商业实战》作者。 微软最有价值专家 MVP，Python Scrapy MongoDB Redis Pandas Golang。</p>
    </body>
    </html>
    
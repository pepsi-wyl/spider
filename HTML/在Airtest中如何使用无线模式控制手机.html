 
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
    <p class="site-subtitle">给时光以生命。</p> <p>在<a href="https://www.kingname.info/2019/01/19/use-airtest/">使用Airtest超快速开发App爬虫</a>文章的最后，我们留了一个尾巴：如何启动Airtest的无线模式，不用USB线就能控制手机？</p> <p>本文将会讲到具体的做法。做法分为两种：第一种是在Airtest的IDE中控制手机。第二种是在Python代码里面控制远程手机。</p> <p>无论使用哪种方式，要远程控制手机，就需要首先把手机上的adb端口打开。这一步必需先用USB线把手机连上电脑。</p> <p>在终端里面执行命令：</p> <p>其中的端口号48887你可以自行设定为其他的端口号，但不能和已有的端口冲突。</p> <p>命令执行完成以后，你就可以拔下USB线了。接下来就是远程控制手机。</p> <p>打开Airtest，点击下图红框框住的 remote connection:</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2019-01-28-21-56-01.png"/></p> <p>在弹出来的输入框中，输入：</p> <p>其中手机的IP你可以在无线路由器中找到，也可以在手机的系统设置中找到。端口就是上一条命令设定的端口。</p> <p>例如：</p> <p>如下图所示。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/2019-01-28-21-57-21.png"/></p> <p>点击<code>connect</code>，此时手机就会在上方的 Device列表中出现。双击它就可以无线连接手机并看到手机屏幕了。</p> <p>首先说明，Airtest的官方文档有问题，如果你跟着文档来写代码，一定会失败。</p> <p>官方文档中，在<a href="https://airtest.readthedocs.io/zh_CN/latest/README_MORE.html#connect-android-device" rel="noopener" target="_blank">https://airtest.readthedocs.io/zh_CN/latest/README_MORE.html#connect-android-device</a>有一段介绍如何连接远程安卓手机的例子：</p> <p>这个代码看起来，你可能会把Python代码写为：</p> <p>如果你这样写，<strong>你一定无法连上手机</strong>。</p> <p>正确的代码为：</p> <p>只有按我这里的写法才能正确控制手机。如下面的gif所示。</p> <p><img alt="" src="https://kingname-1257411235.cos.ap-chengdu.myqcloud.com/correct_method_of_connect.gif"/></p> <p>动图中涉及到的完整代码为：</p> <p class="site-author-name" itemprop="name">谢乾坤 | Kingname</p> <p class="site-description motion-element" itemprop="description">高级数据挖掘工程师，《Python 爬虫开发 从入门到实战》、《左手 MongoDB 右手 Redis——从入门到商业实战》作者。 微软最有价值专家 MVP，Python Scrapy MongoDB Redis Pandas Golang。</p>
    </body>
    </html>
    